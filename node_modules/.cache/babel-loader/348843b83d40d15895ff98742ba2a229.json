{"ast":null,"code":"import{max,scaleBand,scaleLinear,axisBottom,axisLeft,select}from'd3';import{line,curveMonotoneX}from'd3-shape';import{color}from'./Color';import\"./DrawLine.css\";var DrawLine=function DrawLine(names,data,slugs,caseType){console.log(names);console.log(data);console.log(slugs);caseType?caseType=caseType:caseType=\"total\";var width=960;var height=500;var padding=.2;var margin={top:80,right:80,bottom:80,left:80};var innerWidth=width-margin.left-margin.right;var vizName=\"viz\";function capFirst(string){return string.charAt(0).toUpperCase()+string.slice(1);}var xAxisLabel=\"Number of Days\";var yAxisLabel=caseType?\"Number of Cases: \".concat(capFirst(caseType)):\"Number of Cases\";var title=\"COVID-19 Cases\";var l=[];data.map(function(d,idx){l.push(d.length);});var i=l.indexOf(Math.max.apply(Math,l));// console.log(l)\n// console.log(i)\nconsole.log(data[i]);var xScale=scaleBand().domain(data[i].map(function(d){return d.dayCount;})).range([margin.left,width-margin.right]).padding(padding);var l2=[];var m=0;data.map(function(dat,idx){m=max(dat,function(d){return d[\"\".concat(caseType)];});l2.push(m);});console.log(l2);var largest=Math.max.apply(Math,l2);console.log(largest);var yScale=scaleLinear().domain([0,largest]).range([height-margin.bottom,margin.top]);var svg=select(\".\".concat(vizName)).append(\"svg\").attr(\"preserveAspectRatio\",\"xMinYMid meet\").attr(\"viewBox\",[0,0,width,height]);data.map(function(dat,idx){console.log(dat[dat.length-1]);console.log(dat[dat.length-1][caseType]);var lineGenerator=line().x(function(d){return xScale(d.dayCount);}).y(function(d){return yScale(d[\"\".concat(caseType)]);}).curve(curveMonotoneX);var s=svg.append('path').attr(\"fill\",\"none\").datum(dat)// .attr('stroke', `#${((1<<24)*Math.random()|0).toString(16)}`)\n.attr('stroke',color(caseType)).attr(\"class\",\"line country\".concat((idx+1).toString())).attr('stroke-width',2).attr('class','line').attr('d',lineGenerator);var t=svg.append('text').text(names[idx]).attr(\"dy\",\".35em\").attr(\"text-anchor\",\"start\").attr(\"transform\",\"translate(\".concat(width-100,\", \").concat(yScale(dat[dat.length-1][caseType])+10,\")\"));});var xAxis=function xAxis(g){g.attr(\"transform\",\"translate(0,\".concat(height-margin.bottom,\")\")).call(axisBottom(xScale).tickValues(xScale.domain().filter(function(d,i){return!((i+1)%10);}))).call(function(g){return g.append(\"text\").attr(\"x\",-margin.left).attr(\"y\",10).attr(\"fill\",\"currentColor\").attr(\"text-anchor\",\"start\").text(data[i].dayCount);});};var xAxisG=svg.append('g').call(xAxis);xAxisG.select('.domain').remove();xAxisG.append('text').attr('class','axis-label').attr('y',45).attr('x',innerWidth/2).attr('fill','black').text(xAxisLabel);var yAxis=function yAxis(g){g.attr(\"transform\",\"translate(\".concat(margin.left,\",0)\")).call(axisLeft(yScale).ticks(null,data[i].format).tickSize(-innerWidth)).call(function(g){return g.select(\".domain\").remove();}).call(function(g){return g.append(\"text\").attr(\"x\",-margin.left).attr(\"y\",10).attr(\"fill\",\"currentColor\").attr(\"text-anchor\",\"start\").text(data[i].total);});};var yAxisG=svg.append('g').call(yAxis);yAxisG.select('.domain').remove();yAxisG.append('text').attr('class','axis-label').attr('y',-60).attr('x',-height/2).attr('fill','black').attr('transform',\"rotate(-90)\").attr('text-anchor','middle').text(yAxisLabel);var titleG=svg.append(\"g\");titleG.append('text').attr('class','title').attr('x',width/2).attr('y',40).attr('text-anchor','middle').text(title);};export default DrawLine;","map":{"version":3,"sources":["/Users/Ginny 1/Desktop/SSUI-FINAL/src/d3/DrawLine.js"],"names":["max","scaleBand","scaleLinear","axisBottom","axisLeft","select","line","curveMonotoneX","color","DrawLine","names","data","slugs","caseType","console","log","width","height","padding","margin","top","right","bottom","left","innerWidth","vizName","capFirst","string","charAt","toUpperCase","slice","xAxisLabel","yAxisLabel","title","l","map","d","idx","push","length","i","indexOf","Math","apply","xScale","domain","dayCount","range","l2","m","dat","largest","yScale","svg","append","attr","lineGenerator","x","y","curve","s","datum","toString","t","text","xAxis","g","call","tickValues","filter","xAxisG","remove","yAxis","ticks","format","tickSize","total","yAxisG","titleG"],"mappings":"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","sourcesContent":["import { max, scaleBand, scaleLinear, axisBottom, axisLeft, select } from 'd3';\nimport { line, curveMonotoneX } from 'd3-shape';\nimport { color } from './Color'\nimport \"./DrawLine.css\"\n\n\n\n\nconst DrawLine = (names, data, slugs, caseType) => {\n    console.log(names)\n    console.log(data)\n    console.log(slugs)\n    caseType ? caseType = caseType : caseType = \"total\";\n    const width = 960\n    const height = 500\n    const padding = .2\n    const margin = ({top: 80, right: 80, bottom: 80, left: 80})\n    const innerWidth = width - margin.left - margin.right;\n    const vizName = \"viz\"\n\n\n    function capFirst(string) {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n\n    const xAxisLabel = \"Number of Days\"\n    const yAxisLabel = caseType ? `Number of Cases: ${capFirst(caseType)}` : \"Number of Cases\"\n    const title = \"COVID-19 Cases\"\n\n    let l =[] \n    data.map((d,idx) => {\n        l.push(d.length)\n    })\n\n    const i = l.indexOf(Math.max.apply(Math, l))\n    // console.log(l)\n    // console.log(i)\n\n    console.log(data[i])\n\n    const xScale = scaleBand()\n        .domain(data[i].map(d => d.dayCount))\n        .range([margin.left, width - margin.right])\n        .padding(padding)\n    \n    let l2 = []\n    let m = 0\n    data.map((dat,idx) =>  {\n        m = max(dat, d => d[`${caseType}`])\n        l2.push(m)\n    })\n    console.log(l2)\n    const largest = Math.max.apply(Math, l2)\n    console.log(largest)\n\n\n    const yScale = scaleLinear()\n        .domain([0, largest])\n        .range([height - margin.bottom, margin.top])\n\n\n    const svg = select(`.${vizName}`)\n    .append(\"svg\")\n    .attr(\"preserveAspectRatio\", \"xMinYMid meet\")\n    .attr(\"viewBox\", [0, 0, width, height])\n\n    data.map((dat, idx) => {\n        console.log(dat[dat.length-1])\n        console.log(dat[dat.length-1][caseType])\n        const lineGenerator = line()\n        .x(d =>  xScale(d.dayCount))\n        .y(d =>  yScale(d[`${caseType}`]))\n        .curve(curveMonotoneX);\n\n        const s = svg.append('path')\n        .attr(\"fill\", \"none\")\n        .datum(dat)\n        // .attr('stroke', `#${((1<<24)*Math.random()|0).toString(16)}`)\n        .attr('stroke', color(caseType))\n\n        .attr(\"class\", `line country${(idx + 1).toString()}`)\n        .attr('stroke-width', 2)\n        .attr('class', 'line') \n        .attr('d', lineGenerator)\n\n        const t = svg.append('text')\n        .text(names[idx])\n        .attr(\"dy\", \".35em\")\n        .attr(\"text-anchor\", \"start\")\n        .attr(\"transform\", `translate(${width - 100}, ${yScale(dat[dat.length-1][caseType])+10})`)\n\n\n\n\n\n\n    })\n\n    const xAxis = (g) => {\n        g.attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(axisBottom(xScale)\n        .tickValues(xScale.domain().filter(function(d,i){ return !(((i+1)%10))})))\n\n\n        .call(g => g.append(\"text\")\n            .attr(\"x\", -margin.left)\n            .attr(\"y\", 10)\n            .attr(\"fill\", \"currentColor\")\n            .attr(\"text-anchor\", \"start\")\n            .text(data[i].dayCount))\n    }\n\n\n    const xAxisG = svg.append('g')\n        .call(xAxis)\n        \n    xAxisG.select('.domain').remove();\n    \n    xAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', 45)\n        .attr('x', innerWidth / 2)\n        .attr('fill', 'black')\n        .text(xAxisLabel)\n\n\n    const yAxis = (g) => {\n        g.attr(\"transform\", `translate(${margin.left},0)`)\n        .call(axisLeft(yScale).ticks(null, data[i].format).tickSize(-innerWidth))\n            \n            .call(g => g.select(\".domain\").remove())\n\n        .call(g => g.append(\"text\")\n            .attr(\"x\", -margin.left)\n            .attr(\"y\", 10)\n            .attr(\"fill\", \"currentColor\")\n            .attr(\"text-anchor\", \"start\")\n            .text(data[i].total))\n    }\n\n\n    const yAxisG = svg.append('g')\n    .call(yAxis)\n    \n    yAxisG.select('.domain').remove();\n\n    yAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', -60)\n        .attr('x', -height / 2)\n        .attr('fill', 'black')\n        .attr('transform', `rotate(-90)`)\n        .attr('text-anchor', 'middle')\n        .text(yAxisLabel);\n\n\n\n    const titleG = svg.append(\"g\")\n\n    titleG.append('text')\n        .attr('class', 'title')\n        .attr('x', width / 2)\n        .attr('y', 40)\n        .attr('text-anchor', 'middle')\n        .text(title);\n\n\n\n\n\n}\n\n\nexport default DrawLine"]},"metadata":{},"sourceType":"module"}