{"ast":null,"code":"import { max, scaleBand, scaleLinear, axisBottom, axisLeft, select } from 'd3';\nimport d3Tip from \"d3-tip\";\nimport { color } from './Color';\n\nconst DrawBar = (countryName, totalCases, dailyData, id, caseType) => {\n  caseType ? caseType = caseType : caseType = \"total\";\n\n  function jsUcfirst(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  } // setting up constants for sizes\n\n\n  const width = 960;\n  const height = 500;\n  const padding = .2;\n  const margin = {\n    top: 80,\n    right: 0,\n    bottom: 80,\n    left: 80\n  };\n  const innerWidth = width - margin.left - margin.right; // const innerHeight = height - margin.top - margin.bottom;\n\n  const vizName = \"viz\" + id; // setting constants for text labels and title\n\n  const xAxisLabel = \"Number of Days\";\n  const yAxisLabel = caseType ? `Number of Cases: ${jsUcfirst(caseType)}` : \"Number of Cases\";\n  const title = countryName;\n\n  const subtitle = () => {\n    if (dailyData.length > 0) {\n      return totalCases.toLocaleString('en') + \" COVID-19 Cases Reported Since \" + dailyData[0].date.toLocaleDateString();\n    } else {\n      return totalCases + \" COVID-19 Cases Reported\";\n    }\n  };\n\n  const xScale = scaleBand().domain(dailyData.map(d => d.dayCount)).range([margin.left, width - margin.right]).padding(padding);\n  const yScale = scaleLinear().domain([0, max(dailyData, d => d[`${caseType}`])]).range([height - margin.bottom, margin.top]);\n\n  const xAxis = g => {\n    g.attr(\"transform\", `translate(0,${height - margin.bottom})`).call(axisBottom(xScale).tickValues(xScale.domain().filter(function (d, i) {\n      return !((i + 1) % 5);\n    }))).call(g => g.append(\"text\").attr(\"x\", -margin.left).attr(\"y\", 10).attr(\"fill\", \"currentColor\").attr(\"text-anchor\", \"start\").text(dailyData.dayCount));\n  };\n\n  const yAxis = g => {\n    g.attr(\"transform\", `translate(${margin.left},0)`).call(axisLeft(yScale).ticks(null, dailyData.format).tickSize(-innerWidth)).call(g => g.select(\".domain\").remove()).call(g => g.append(\"text\").attr(\"x\", -margin.left).attr(\"y\", 10).attr(\"fill\", \"currentColor\").attr(\"text-anchor\", \"start\").text(dailyData.total));\n  }; // setting up tooltip with data labels\n  // const tip = d3Tip()\n  //     .attr('class', 'd3-tip')\n  //     .offset([-10, 0])\n  //     .html(function(d) {\n  //         return \"<p>\" + \"<span style='color:white'>\" + \"Day \" + d.dayCount.toLocaleString('en') + \"<br/>\" +\n  //             d.date.toLocaleDateString() + \"<br/>\" + \"</span>\" +\n  //             \"<span style='color:#BD2D28'>\" + d.total.toLocaleString('en') + \" Total\" + \"<br/>\" + \"</span>\" +\n  //             \"<span style='color:#E3BA22'>\" + d.active.toLocaleString('en') + \" Active\" + \"<br/>\" + \"</span>\" +\n  //             \"<span style='color:#A0B700'>\" + d.recovered.toLocaleString('en') + \" Recovered\" + \"<br/>\" + \"</span>\" +\n  //             \"<span style='color:#BA5F06'>\" + d.deaths.toLocaleString('en') + \" Deaths\" + \"</p>\" \n  //     })\n  // setting up svg element on card\n\n\n  const svg = select(`.${vizName}`).append(\"svg\").attr(\"preserveAspectRatio\", \"xMinYMid meet\").attr(\"viewBox\", [0, 0, width, height]);\n  const g = svg.append(\"g\").attr(\"fill\", color(caseType)).selectAll('rect').data(dailyData).join(\"rect\").attr('x', d => xScale(d.dayCount)).attr(\"y\", d => yScale(d[`${caseType}`])).attr(\"width\", xScale.bandwidth()).attr(\"height\", d => yScale(0) - yScale(d[`${caseType}`])).attr(\"class\", \"bar\"); // .on('mouseover', tip.show)\n  // .on('mouseout', tip.hide)\n\n  const xAxisG = svg.append('g').call(xAxis);\n  xAxisG.select('.domain').remove();\n  xAxisG.append('text').attr('class', 'axis-label').attr('y', 45).attr('x', innerWidth / 2).attr('fill', 'black').text(xAxisLabel);\n  const yAxisG = svg.append('g').call(yAxis);\n  yAxisG.select('.domain').remove();\n  yAxisG.append('text').attr('class', 'axis-label').attr('y', -60).attr('x', -height / 2).attr('fill', 'black').attr('transform', `rotate(-90)`).attr('text-anchor', 'middle').text(yAxisLabel);\n  const titleG = svg.append(\"g\");\n  titleG.append('text').attr('class', 'title').attr('x', width / 2).attr('y', 40).attr('text-anchor', 'middle').text(title);\n  titleG.append('text').attr('class', 'subtitle').attr('x', width / 2).attr('y', 70).attr('text-anchor', 'middle').text(subtitle()); // svg.call(tip);\n};\n\nexport default DrawBar;","map":{"version":3,"sources":["/Users/Ginny 1/SSUI-Final/src/d3/DrawBar.js"],"names":["max","scaleBand","scaleLinear","axisBottom","axisLeft","select","d3Tip","color","DrawBar","countryName","totalCases","dailyData","id","caseType","jsUcfirst","string","charAt","toUpperCase","slice","width","height","padding","margin","top","right","bottom","left","innerWidth","vizName","xAxisLabel","yAxisLabel","title","subtitle","length","toLocaleString","date","toLocaleDateString","xScale","domain","map","d","dayCount","range","yScale","xAxis","g","attr","call","tickValues","filter","i","append","text","yAxis","ticks","format","tickSize","remove","total","svg","selectAll","data","join","bandwidth","xAxisG","yAxisG","titleG"],"mappings":"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","sourcesContent":["import { max, scaleBand, scaleLinear, axisBottom, axisLeft, select } from 'd3'\nimport d3Tip from \"d3-tip\";\nimport { color } from './Color'\n\nconst DrawBar = (countryName, totalCases, dailyData, id, caseType) => {\n\n    caseType ? caseType = caseType : caseType = \"total\"\n\n    function jsUcfirst(string) {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n\n    // setting up constants for sizes\n    const width = 960\n    const height = 500\n    const padding = .2\n    const margin = ({top: 80, right: 0, bottom: 80, left: 80})\n    const innerWidth = width - margin.left - margin.right;\n    // const innerHeight = height - margin.top - margin.bottom;\n    const vizName = \"viz\" + id\n\n\n    // setting constants for text labels and title\n    const xAxisLabel = \"Number of Days\"\n    const yAxisLabel = caseType ? `Number of Cases: ${jsUcfirst(caseType)}` : \"Number of Cases\"\n    const title = countryName\n    const subtitle = () => {\n        if (dailyData.length > 0) {\n            return totalCases.toLocaleString('en') + \" COVID-19 Cases Reported Since \" + dailyData[0].date.toLocaleDateString()\n        } else {\n            return totalCases + \" COVID-19 Cases Reported\"\n        }\n    }\n\n\n    const xScale = scaleBand()\n        .domain(dailyData.map(d => d.dayCount))\n        .range([margin.left, width - margin.right])\n        .padding(padding)\n\n\n\n\n    const yScale = scaleLinear()\n        .domain([0, max(dailyData, d => d[`${caseType}`])])\n        .range([height - margin.bottom, margin.top])\n\n\n\n    const xAxis = (g) => {\n        g.attr(\"transform\", `translate(0,${height - margin.bottom})`)\n        .call(axisBottom(xScale)\n        .tickValues(xScale.domain().filter(function(d,i){ return !(((i+1)%5))})))\n\n\n        .call(g => g.append(\"text\")\n            .attr(\"x\", -margin.left)\n            .attr(\"y\", 10)\n            .attr(\"fill\", \"currentColor\")\n            .attr(\"text-anchor\", \"start\")\n            .text(dailyData.dayCount))\n    }\n\n    \n    const yAxis = (g) => {\n        g.attr(\"transform\", `translate(${margin.left},0)`)\n        .call(axisLeft(yScale).ticks(null, dailyData.format).tickSize(-innerWidth))\n            \n            .call(g => g.select(\".domain\").remove())\n\n        .call(g => g.append(\"text\")\n            .attr(\"x\", -margin.left)\n            .attr(\"y\", 10)\n            .attr(\"fill\", \"currentColor\")\n            .attr(\"text-anchor\", \"start\")\n            .text(dailyData.total))\n    }\n\n\n\n    // setting up tooltip with data labels\n    // const tip = d3Tip()\n    //     .attr('class', 'd3-tip')\n    //     .offset([-10, 0])\n    //     .html(function(d) {\n    //         return \"<p>\" + \"<span style='color:white'>\" + \"Day \" + d.dayCount.toLocaleString('en') + \"<br/>\" +\n    //             d.date.toLocaleDateString() + \"<br/>\" + \"</span>\" +\n    //             \"<span style='color:#BD2D28'>\" + d.total.toLocaleString('en') + \" Total\" + \"<br/>\" + \"</span>\" +\n    //             \"<span style='color:#E3BA22'>\" + d.active.toLocaleString('en') + \" Active\" + \"<br/>\" + \"</span>\" +\n    //             \"<span style='color:#A0B700'>\" + d.recovered.toLocaleString('en') + \" Recovered\" + \"<br/>\" + \"</span>\" +\n    //             \"<span style='color:#BA5F06'>\" + d.deaths.toLocaleString('en') + \" Deaths\" + \"</p>\" \n    //     })\n        \n\n\n\n\n    \n\n\n\n    // setting up svg element on card\n    const svg = select(`.${vizName}`)\n        .append(\"svg\")\n        .attr(\"preserveAspectRatio\", \"xMinYMid meet\")\n        .attr(\"viewBox\", [0, 0, width, height])\n\n    const g = svg.append(\"g\")\n        .attr(\"fill\", color(caseType))\n        .selectAll('rect')\n        .data(dailyData)\n        .join(\"rect\")\n        .attr('x', d => xScale(d.dayCount))\n\n        .attr(\"y\", d => yScale(d[`${caseType}`]))\n        .attr(\"width\", xScale.bandwidth())\n        .attr(\"height\", d => yScale(0) - yScale(d[`${caseType}`]))\n        .attr(\"class\", \"bar\")\n        // .on('mouseover', tip.show)\n        // .on('mouseout', tip.hide)\n\n\n\n\n    const xAxisG = svg.append('g')\n        .call(xAxis)\n        \n    xAxisG.select('.domain').remove();\n    \n    xAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', 45)\n        .attr('x', innerWidth / 2)\n        .attr('fill', 'black')\n        .text(xAxisLabel)\n\n\n\n\n\n\n\n    const yAxisG = svg.append('g')\n        .call(yAxis)\n        \n    yAxisG.select('.domain').remove();\n    \n    yAxisG.append('text')\n        .attr('class', 'axis-label')\n        .attr('y', -60)\n        .attr('x', -height / 2)\n        .attr('fill', 'black')\n        .attr('transform', `rotate(-90)`)\n        .attr('text-anchor', 'middle')\n        .text(yAxisLabel);\n\n\n\n    const titleG = svg.append(\"g\")\n\n    titleG.append('text')\n        .attr('class', 'title')\n        .attr('x', width / 2)\n        .attr('y', 40)\n        .attr('text-anchor', 'middle')\n        .text(title);\n\n        titleG.append('text')\n        .attr('class', 'subtitle')\n        .attr('x', width / 2)\n        .attr('y', 70)\n        .attr('text-anchor', 'middle')\n        .text(subtitle());\n\n    // svg.call(tip);\n\n}\n\n\n\n\nexport default DrawBar"]},"metadata":{},"sourceType":"module"}